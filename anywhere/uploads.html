<!DOCTYPE html>
<html>
<head>

    <title>Upload Videos to Bravoflix with the help of BlogBlimp</title>   
    <meta http-equiv="Content-type" content="text/html;charset=UTF-8" />
    <meta name="dc.language" content="en" />
    <meta name="geo.country" content="US" />
    <meta name="viewport" content="width=device-width; initial-scale=1.0" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="white" >

    <meta name="description" content="Upload your videos to Bravoflix" />
    <meta name="robots" content="noindex, nofollow" />

    <script src="../build/jquery.js"></script>
    <script src="../build/mediaelement-and-player.min.js"></script>

    <!--[if lt IE 9]>
	<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<link rel="stylesheet" href="../styles/main_ie.css" />
    <![endif]-->

    <link rel="stylesheet" href="http://www.blogblimp.com/styles/main.css" />
    <link rel="stylesheet" href="../build/mediaelementplayer.min.css" />
    <link rel="apple-touch-icon" href="../apple-touch-icon.png" />

    <style>
	div.center {   
	margin-left: auto;   
	margin-right: auto;  
	max-width: 794px; 
        width:expression( document.body.clientWidth > 794? "794px": "auto" );  
	}

	span {
	font-family: Arial, Sans-Serif;
	color: #757172;
	}

        form { 
	padding: 20px; 
	border: 1px solid #cccccc; 
	border-radius:10px; 
	-moz-border-radius: 10px; 
	-webkit-box-shadow:0 0 10px #ccc; 
	-moz-box-shadow: 0 0 10px #ccc; 
	box-shadow: 0 0 10px #ccc; 

	width: 400px; 
	margin: 20px auto; 
	background-image: -moz-linear-gradient(top, #ffffff,#f2f2f2); 
	background-image: -webkit-gradient(linear, left top, left bottom, from(#ffffff), to(#f2f2f2)); 
	} 

	input { 
	border:1px solid #ccc; 
	font-size: 13pt; 
	padding: 5px 10px 5px 10px; 
	border-radius:10px; 
	-moz-border-radius: 10px; 
	-webkit-transition: all 0.5s ease-in-out; 
	-moz-transition: all 0.5s ease-in-out; 
	transition: all 0.5s ease-in-out; 
	} 

	input[type=button] { 
	background-image: -moz-linear-gradient(top, #ffffff, #dfdfdf); 
	background-image: -webkit-gradient(linear, left top, left bottom, from(#ffffff), to(#dfdfdf)); 
	} 


	input:focus { 
	-webkit-box-shadow:0 0 10px #ccc; 
	-moz-box-shadow: 0 0 10px #ccc; 
	box-shadow: 0 0 5px #ccc; 

	-webkit-transform: scale(1.05); 
	-moz-transform: scale(1.05); 
	transform: scale(1.05); 
	} 

	#key { width: 378px; } 

	#progressIndicator { font-size: 10pt; } 

	#fileInfo 
	{ 
	font-size: 10pt; 
	font-style: italic; 
	color: #aaa; 
	margin-top: 10px; 
	} 

	#progressBar 
	{ 
	height: 14px; 
	border: 1px solid #cccccc; 
	display: none; 
	border-radius:10px; 
	-moz-border-radius: 10px; 
	background-image: -moz-linear-gradient(top, #66cc00, #4b9500); 
	background-image: -webkit-gradient(linear, left top, left bottom, from(#66cc00), to(#4b9500)); 
	} 

	#uploadResponse { 
	margin-top: 10px; 
	padding: 20px; 
	overflow: hidden; 
	display: none; 
	border-radius:10px; 
	-moz-border-radius: 10px; 
	border: 1px solid #ccc; 
	box-shadow: 0 0 5px #ccc; 
	background-image: -moz-linear-gradient(top, #ff9900, #c77801); 
	background-image: -webkit-gradient(linear, left top, left bottom, from(#ff9900), to(#c77801)); 
	} 

    </style>

    <script type="text/javascript">
      var bytesUploaded = 0;
      var bytesTotal = 0;
      var previousBytesLoaded = 0;
      var intervalTimer = 0;

      function fileSelected() {
        var file = document.getElementById('key').files[0];
        var fileSize = 0;
        if (file.size > 1024 * 1024)
          fileSize = (Math.round(file.size * 100 / (1024 * 1024)) / 100).toString() + 'MB';
        else
          fileSize = (Math.round(file.size * 100 / 1024) / 100).toString() + 'KB';
        document.getElementById('fileInfo').style.display = 'block';
        document.getElementById('fileName').innerHTML = 'Name: ' + file.name;
        document.getElementById('fileSize').innerHTML = 'Size: ' + fileSize;
        document.getElementById('fileType').innerHTML = 'Type: ' + file.type;
      }
      
      function uploadFile() {
        previousBytesLoaded = 0;
        document.getElementById('uploadResponse').style.display = 'none';
        document.getElementById('progressNumber').innerHTML = '';
        var progressBar = document.getElementById('progressBar');
        progressBar.style.display = 'block';
        progressBar.style.width = '0px';        
        
        /* If you want to upload only a file along with arbitary data that
           is not in the form, use this */
        var fd = new FormData();
        fd.append("author", "Shiv Kumar");
        fd.append("name", "Html 5 File API/FormData");
        fd.append("key", document.getElementById('key').files[0]);

        /* If you want to simply post the entire form, use this */
        //var fd = document.getElementById('form1').getFormData();
        
        var xhr = new XMLHttpRequest();        
        xhr.upload.addEventListener("progress", uploadProgress, false);
        xhr.addEventListener("load", uploadComplete, false);
        xhr.addEventListener("error", uploadFailed, false);
        xhr.addEventListener("abort", uploadCanceled, false);
        xhr.open("POST", "http://s3.amazonaws.com/blogblimp"); <!--formerly Upload.aspx-->
        xhr.send(fd);

        intervalTimer = setInterval(updateTransferSpeed, 500);
      }

      function updateTransferSpeed() {
        var currentBytes = bytesUploaded;
        var bytesDiff = currentBytes - previousBytesLoaded;
        if (bytesDiff == 0) return;
        previousBytesLoaded = currentBytes;
        bytesDiff = bytesDiff * 2;
        var bytesRemaining = bytesTotal - previousBytesLoaded;
        var secondsRemaining = bytesRemaining / bytesDiff;

        var speed = "";
        if (bytesDiff > 1024 * 1024)
          speed = (Math.round(bytesDiff * 100/(1024*1024))/100).toString() + 'MBps';
        else if (bytesDiff > 1024)
          speed =  (Math.round(bytesDiff * 100/1024)/100).toString() + 'KBps';
        else
          speed = bytesDiff.toString() + 'Bps';
        document.getElementById('transferSpeedInfo').innerHTML = speed;
        document.getElementById('timeRemainingInfo').innerHTML = '| ' + secondsToString(secondsRemaining);        
      }

      function secondsToString(seconds) {        
        var h = Math.floor(seconds / 3600);
        var m = Math.floor(seconds % 3600 / 60);
        var s = Math.floor(seconds % 3600 % 60);
        return ((h > 0 ? h + ":" : "") + (m > 0 ? (h > 0 && m < 10 ? "0" : "") + m + ":" : "0:") + (s < 10 ? "0" : "") + s);
      }

      function uploadProgress(evt) {
        if (evt.lengthComputable) {
          bytesUploaded = evt.loaded;
          bytesTotal = evt.total;
          var percentComplete = Math.round(evt.loaded * 100 / evt.total);
          var bytesTransfered = '';
          if (bytesUploaded > 1024*1024)
            bytesTransfered = (Math.round(bytesUploaded * 100/(1024*1024))/100).toString() + 'MB';
          else if (bytesUploaded > 1024)
            bytesTransfered = (Math.round(bytesUploaded * 100/1024)/100).toString() + 'KB';
          else
            bytesTransfered = (Math.round(bytesUploaded * 100)/100).toString() + 'Bytes';

          document.getElementById('progressNumber').innerHTML = percentComplete.toString() + '%';
          document.getElementById('progressBar').style.width = (percentComplete * 3.55).toString() + 'px';
          document.getElementById('transferBytesInfo').innerHTML = bytesTransfered;
          if (percentComplete == 100) {
            document.getElementById('progressInfo').style.display = 'none';
            var uploadResponse = document.getElementById('uploadResponse');
            uploadResponse.innerHTML = '<span style="font-size: 18pt; font-weight: bold;">Please wait...</span>';
            uploadResponse.style.display = 'block';
          }
        }
        else {
          document.getElementById('progressBar').innerHTML = 'unable to compute';
        }  
      }

      function uploadComplete(evt) {
        clearInterval(intervalTimer);
        var uploadResponse = document.getElementById('uploadResponse');
        uploadResponse.innerHTML = evt.target.responseText;
        uploadResponse.style.display = 'block';
      }  
  
      function uploadFailed(evt) {
        clearInterval(intervalTimer);
        alert("An error occurred while uploading the file.");  
      }  
  
      function uploadCanceled(evt) {
        clearInterval(intervalTimer);
        alert("The upload has been canceled by the user or the browser dropped the connection.");  
      }  

    </script>

</head>

<body>

    <div id="pagewrapper">

    <header>

        <div  style="text-align:center; padding-top: 30px">

	    <h2>Upload Your Videos to Bravoflix</h2><br />
	    <h3 style="color:#757172"></h3>

	</div>

    </header>

    <article>

        <div id="mainContent">

	    <div class="center">

		  <video width="794" height="446" poster="http://awesome.blogblimp.com/images/misc/improv_1.jpg" controls="controls" preload="none">
		<!-- MP4 source must come first for iOS -->
		     <source type="video/mp4" src="http://awesome.blogblimp.com/media/improv_1-480x320.mp4" />
		<!-- WebM for Firefox 4 and Opera -->
		     <source type="video/webm" src="http://awesome.blogblimp.com//media/improv_1-640x480.webm" />
		<!-- Fallback flash player for no-HTML5 browsers with JavaScript turned off -->
		     <object width="794" height="446" type="application/x-shockwave-flash" data="../build/flashmediaelement.swf"> 		
			<param name="movie" value="../build/flashmediaelement.swf" /> 
			<param name="flashvars" value="controls=true&amp;file=../media/improv_1.mp4" /> 		
		<!-- Image fall back for non-HTML5 browser with JavaScript turned off and no Flash player installed -->
			<img src="http://awesome.blogblimp.com/media/improv_1-480x320.mp4" width="794" height="446" alt="Opus 99%: 'The Crunch'" 
				title="No video playback. Update browser, enable Javascript, or install Flash." />
		      </object> 	
		  </video>

	    </div>

	    <br />

	    <div class="center">
 
	       <p>Instructions go here.</p>

                    <form id="form1" action="http://s3.amazonaws.com/blogblimp" method="post" enctype="multipart/form-data">

		       <div class="row">
		           <label for="key">Select a File to Upload</label><br />
      		           <input type="file" id="key" name="key" value="uploads/${filename}" onchange="fileSelected();">
		       </div>
		       <div class="row">
		           <input type="button" onclick="uploadFile()" value="Upload" />
  		       </div>

      		       <input type="hidden" name="acl" value="private">
      		       <input type="hidden" name="Content-Type" value="application/octet-stream">
      		       <input type="hidden" name="AWSAccessKeyId" value="AKIAIS2YP2JSHN2P5ZRA"> 
      		       <input type="hidden" name="policy" value="eyAiZXhwaXJhdGlvbiI6ICIyMDEzLTAxLTAxVDEyOjAwOjAwLjAwMFoiLCAgCiAgImNvbmRpdGlvbnMiOiBbICAgIAogICAgeyJidWNrZXQiOiAiYmxvZ2JsaW1wIiB9LCAgICAKICAgIFsic3RhcnRzLXdpdGgiLCAiJGtleSIsICJ1cGxvYWRzLyJdLCAgICAKICAgIHsiYWNsIjogInByaXZhdGUifSwgICAgCiAgICBbInN0YXJ0cy13aXRoIiwgIiRDb250ZW50LVR5cGUiLCAiIl0sICAgIAogICAgeyJzdWNjZXNzX2FjdGlvbl9yZWRpcmVjdCI6ICJodHRwOi8vYmxvZ2JsaW1wLmNvbS9hbnlkZXZpY2UvYW55d2hlcmUvdXBsb2Fkc3VjY2Vzcy5odG1sIn0sICAKICBdCn0=">
		       <input type="hidden" name="signature" value="wtv+lXg7ZmVJ8CuGU8mriTjIBls=">
      		       <input type="hidden" name="success_action_redirect" value="http://blogblimp.com/anydevice/anywhere/uploadsuccess.html">

		   <!-- Include any additional input fields here -->

      		       <div id="fileInfo">
   		           <div id="fileName"></div>
    			       <div id="fileSize"></div>
                                   <div id="fileType"></div>
                                   </div>
  			       <div class="row"></div>
  			   <div id="progressIndicator">
        	       <div id="progressBar" class="floatLeft">
    		       </div>
    			   <div id="progressNumber" class="floatRight">&nbsp;</div>
    			       <div class="clear"></div>
    			           <div>
      			   	        <div id="transferSpeedInfo" class="floatLeft" style="width: 80px;">&nbsp;</div>
      				        <div id="timeRemainingInfo" class="floatLeft" style="margin-left: 10px;">&nbsp;</div>
      					<div id="transferBytesInfo" class="floatRight" style="text-align: right;">&nbsp;</div>
      					<div class="clear"></div>
    			           </div>    
    				   <div id="uploadResponse"></div>
  			       </div>   
    		   </form> 
	       
	    </div><!--Center-->

        </div><!--MainContent-->

    </article>

    <div class="clear_both"></div>
    
    <br />

    <footer>
        <p>
	<h3><strong>&copy; 2012 by Sean Bradley. All rights reserved.</strong></h3><br />
	<br />
	<span><strong>Powered by <a href="http://blogblimp.com">BlogBlimp</a>.</strong></span><br />
	<img src="http://awesome.blogblimp.com/images/misc/tinyblimp.png" alt="" height="65" />
	<br />
	<strong>High-performance cloud-based computing for artists with global audiences.</strong>
	</p>
    </footer>

    </div><!--pagewrapper-->

    <script>

        // pause MediaElement player by clicking (x) on the Reveal modal
	$('#stopall').click(function() {
            $('video, audio').each(function() {
                $(this)[0].player.pause();		  
            });
        });

        // jQuery method
	$('video').mediaelementplayer({    
	  // if the <video width> is not specified, this is the default    
	  defaultVideoWidth: 794,    
	  // if the <video height> is not specified, this is the default    
	  defaultVideoHeight: 446,    
	  // if set, overrides <video width>    
	  videoWidth: -1,    
	  // if set, overrides <video height>    
	  videoHeight: -1,    
	  // initial volume when the player starts    
	  startVolume: 0.8,    
	  // enables Flash and Silverlight to resize to content size    
	  enableAutosize: true,    
	  // the order of controls you want on the control bar (and other plugins below)    
	  features: ['playpause','progress','current','duration','tracks','volume','fullscreen'],     
	});

    </script>

    <!--Clicky-->
    <script src="//static.getclicky.com/js"></script>
    <script>try{ clicky.init(66520566); }catch(e){}</script>
    <noscript><p><img alt="Clicky" width="1" height="1" src="//in.getclicky.com/66520566ns.gif" /></p></noscript>

</body>
</html>




